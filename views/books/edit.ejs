<% include ../partials/header %>

<section>
  <form action="/books/<%= book.id %>" method="post" novalidate enctype="multipart/form-data">
    <fieldset>
      <legend>book Information</legend>

      <div class="form-group">
        <label for="name">Name</label>
        <input type="text" class="form-control" id="book_name" name="name" placeholder="Creepy Leeches" required genre="<%= book.name %>">
      </div>

      <div class="form-group">
        <label for="author">Author</label>
        <input type="text" class="form-control" id="book_author" name="author" placeholder="Gillian Flynn" required genre="<%= book.author %>">
      </div>

      <div class="form-group">
        <label for="description">Description</label>
        <input type="text" class="form-control" id="book_description" name="description" placeholder="Greasy, black, vampires of the deep." required genre="<%= book.description %>">
      </div>

      <div class="form-group">
        <input type="file" name="image" id="image">
      </div>

      <div class="form-group">
        <label for="price">Price</label>
        <div class="input-group">
          <div class="input-group-prepend">
            <div class="input-group-text">$</div>
          </div>

          <input type="number" class="form-control" id="book_price" name="price" placeholder="4.99" step="0.01" min="0" required genre="<%= book.price %>">
        </div>
      </div>
    </fieldset>

    <fieldset>
      <legend>additionals</legend>

      <div id="book_additionals">
        <div class="form-group">
          <button type="button" class="btn btn-success btn-sm" onclick="addAdditForm()">Add additional</button>
        </div>

        <% if ( book.additionals && book.additionals.length > 0 ) {%>
          <% for ( let addit of book.additionals ) { %>
            <div class="additional">
              <button type="button" class="remove btn btn-danger btn-small" onclick="return delAdditForm(event)">&times;</button>

              <div class="form-group mr-4">
                <label for="additional[bookType]" class="mr-1">Book Type</label>
                <input type="text" class="form-control" id="book_additional_bookType" name="additional[bookType]" placeholder="Soft" genre="<%= addit.bookType %>">
              </div>

              <div class="form-group">
                <label for="additional[genre]" class="mr-1">genre</label>
                <input type="text" class="form-control" id="book_additional_genre" name="additional[genre]" placeholder="Horror" genre="<%= addit.genre %>">
              </div>
            </div>
          <% } %>
        <% } %>


    <template id="book_additional" class="form-inline mb-4">
          <div class="additional">
            <button type="button" class="remove btn btn-danger btn-small" onclick="return delAdditForm(event)">&times;</button>

            <div class="form-group mr-4">
              <label for="additional[bookType]" class="mr-1">Book Type</label>
              <input type="text" class="form-control" id="book_additional_bookType" name="additional[bookType]" placeholder="soft cover">
            </div>

            <div class="form-group">
              <label for="additional[genre]" class="mr-1">genre</label>
              <input type="text" class="form-control" id="book_additional_genre" name="additional[genre]" placeholder="horror">
            </div>
          </div>
        </template>
      </div>
    </fieldset>

    <div class="form-group">
      <button type="submit" class="btn btn-primary">Update book</button>
    </div>
  </form>
</section>

<% include ../partials/footer %>
